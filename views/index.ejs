<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/media.css">
    <script>
        let lat, lng;
        navigator.geolocation.getCurrentPosition(
            async (position) => {
                lat = parseFloat(position.coords.latitude)
                lng = parseFloat(position.coords.longitude)

                console.log(lat + " " + lng);
            },
            (error) => {
                console.log(error)
            }
        );
    </script>
</head>

<body data-bs-theme="dark" class="bg-secondary">

    <header class="header">

        <header class="header-container">

            <h1 class="brand">
                PEACE DATA
            </h1>
    
            <div class="navbar-menu">
    
                <div class="navbar-item">About Us</div>
                <div class="navbar-item">Account</div>
    
            </div>

        </header>

    </header>

    <div class="main-wrapper">
        
        <main id="main">

            <div class="main-body">

                
                <div class="chat">
                    
                    <div class="messages">
                        <div class="message-block">

                            <img src="imgs/Group 3.svg" alt="" class="author">
    
                            <div class="message-text">
                                Hey, how are you?
                            </div>
    
                        </div>
    
                        <div class="message-block after">
    
                            <img src="imgs/Icon.svg" alt="" class="author">
    
                            <div class="message-text">
                                Great! What can I do for you?
                            </div>
    
                        </div>
    
                        <div class="message-block after">
    
                            <img src="imgs/Group 3.svg" alt="" class="author">
    
                            <div class="message-text">
                                What is the nearest building?
                            </div>
    
                        </div>
    
                        <div class="message-block after">
    
                            <img src="imgs/Icon.svg" alt="" class="author">
    
                            <div class="message-text">
                                The closest building is <span class="highlight">Khan Shatyr.</span> <br>
                                <br>
                                You can get more information in the right bar.
                            </div>
    
                        </div>
                    </div>

                    <div class="message-send">

                        <input type="text" name="send-message"
                        placeholder="Type your message..."
                        id="send-message">

                    </div>

                </div>

                <div class="info">

                    <div class="first-row">

                        <div class="weather">
                            <script>
                                (function(d, s, id) {
                                    if (d.getElementById(id)) {
                                        if (window.__TOMORROW__) {
                                            window.__TOMORROW__.renderWidget();
                                        }
                                        return;
                                    }
                                    const fjs = d.getElementsByTagName(s)[0];
                                    const js = d.createElement(s);
                                    js.id = id;
                                    js.src = "https://www.tomorrow.io/v1/widget/sdk/sdk.bundle.min.js";

                                    fjs.parentNode.insertBefore(js, fjs);
                                })(document, 'script', 'tomorrow-sdk');
                            </script>

                            <div class="tomorrow"
                                 data-location-id="065737"
                                 data-language="EN"
                                 data-unit-system="METRIC"
                                 data-skin="light"
                                 data-widget-type="aqiMini"
                                 style="padding-bottom:22px;position:relative;"
                            >
                                <a
                                        href="https://www.tomorrow.io/weather-api/"
                                        rel="nofollow noopener noreferrer"
                                        target="_blank"
                                        style="position: absolute; bottom: 0; transform: translateX(-50%); left: 50%;"
                                >
                                    <img
                                            alt="Powered by the Tomorrow.io Weather API"
                                            src="https://weather-website-client.tomorrow.io/img/powered-by.svg"
                                            width="250"
                                            height="18"
                                    />
                                </a>
                            </div>
                        </div>

                    </div>

                    <div class="second-row">

                        <div class="two-gis-map" id="two-gis">

                        </div>
                        
                    </div>

                </div>


            </div>

        </main>

    </div>

    <script src="https://mapgl.2gis.com/api/js/v1"></script>
    <script src="https://unpkg.com/@2gis/mapgl-directions@^2/dist/directions.js"></script>
    <script>
        const map = new mapgl.Map('two-gis', {
            center: [lng, lat],
            zoom: 13,
            key: 'a03f49e3-b375-4933-ac64-8a18f902f805',
            style: 'c080bb6a-8134-4993-93a1-5b4d8c36a59b'
        });
        const marker = new mapgl.Marker(map, {
            coordinates: [71.47228, 51.12564],
            label: {
                text: "Мечеть",
                offset: [0, -75],
                image: {
                    url: 'https://docs.2gis.com/img/mapgl/tooltip.svg',
                    size:[100,40],
                    padding:[10, 10, 20,10],
                }
            }
        });

        const marker2 = new mapgl.Marker(map, {
            coordinates: [71.4029295, 51.10826195259179],
            label: {
                text: "Мечеть",
                offset: [0, -75],
                image: {
                    url: 'https://docs.2gis.com/img/mapgl/tooltip.svg',
                    size:[100,40],
                    padding:[10, 10, 20,10],
                }
            }
        });

        const userMarker = new mapgl.Marker(map, {
            coordinates: [lng, lat],
            label: {
                text: "Я",
                offset: [0, -75],
                image: {
                    url: 'https://docs.2gis.com/img/mapgl/tooltip.svg',
                    size:[100,40],
                    padding:[10, 10, 20,10],
                }
            }
        });

        const directions = new mapgl.Directions(map, {
            // This key can be used for demo purpose only!
            // You can get your own key on http://partner.api.2gis.ru/
            directionsApiKey: 'a03f49e3-b375-4933-ac64-8a18f902f805',
        });

        directions.pedestrianRoute({
            points: [userMarker.getCoordinates(), marker.getCoordinates(), marker2.getCoordinates()],
        });
    </script>
</body>

</html>